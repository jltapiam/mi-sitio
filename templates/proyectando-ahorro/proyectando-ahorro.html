{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% crispy form form.helper %}

{% block title %}
  Proyectando ahorro
{% endblock title %}

{% block body %}

  <div>
    <h1 class="text-center text-white">Proyección ahorro con depósito a plazo</h1>
  <div>

  {% if request.method == 'POST' %}
    <div class="d-flex justify-content-center">
      <h2 class="d-flex text-white bg-dark">Proyección para {{ producto }}</h2>
    </div>
  {% endif %}

  
  <div class="container-fluid px-1">
    <div class='row'>
      <div class='col-12 col-lg-4 pt-2 pt-lg-5'>
        {% crispy form %}
      </div>
      
      <div class='col-12 col-lg-8'>
        <ul class="nav nav-tabs justify-content-center rounded">

          {% if request.method == 'GET' %}

            <li class="nav-item border">
              <a class="nav-link text-white active" data-bs-toggle="pill" href="#ayuda">Ayuda</a>
            </li>

          {% endif %}

          {% if request.method == 'POST' %}
            <li class="nav-item border">
              <a class="nav-link text-white active" data-bs-toggle="pill" href="#pie">Resumen</a>
            </li>
            <li class="nav-item border">
              <a class="nav-link text-white" data-bs-toggle="pill" href="#df">Tabla</a>
            </li>
            <li class="nav-item border">
              <a class="nav-link text-white" data-bs-toggle="pill" href="#ayuda">Ayuda</a>
            </li>
          {% endif %}

        </ul>
        
        <div class="tab-content">

          {% if request.method == 'GET' %}
            <div id="pie" class="container-fluid tab-pane fade show">
          {% else %}
            <div id="pie" class="container-fluid tab-pane fade show active">
          {% endif %}
            <div class="container-fluid">
              <div class="row justify-content-center">
                <div class='col-12 col-md-4 pt-3'>
                  {% include 'proyectando-ahorro/t-resumen-proyecto.html' %}
                </div>
                  
                <div class='col-12 col-md-6'>
                  {% comment %} pie {% endcomment %}
                  {% if pie %}
                    <img src="data:image/png;base64,{{ pie }}" alt="pie chart">
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          
          <div id="df" class="container-fluid text-center tab-pane fade show">
            {% comment %} df {% endcomment %}
            <div class="table-wrapper">
              {% if df %}
                {% autoescape off %}
                  {{ df }}
                {% endautoescape %}
              {% endif %}
            </div>
          </div>
          
          {% if request.method == 'GET' %}
            <div id="ayuda" class="container tab-pane fade show active">
          {% else %}
            <div id="ayuda" class="container tab-pane fade show">
          {% endif %}

            <div class="container-fluid">
              
              {% include 'proyectando-ahorro/ayuda-app.html' %}

            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script src={% static 'js/ahorro.js' %}></script>
{% endblock body %}
